#! /bin/bash

if [[ $OSTYPE == linux-gnu* ]]; then  # WSL, GNU
  home_to_here=$(realpath $(dirname $BASH_SOURCE) --relative-to ~)
  ln -s ~/$home_to_here/dir_colors ~/.dir_colors
elif [[ $OSTYPE == darwin* ]]; then  # macOS
  home_to_here=$(cd "$(dirname "$0")"; pwd)
else
  echo "Error: unrecognized operating system '$OSTYPE'" 1>&2
  exit 1
fi

if command -v stow >/dev/null 2>&1; then
  pushd $home_to_here
  stow readline -t ~
  stow bash -t ~
  stow zsh -t ~
  stow tmux -t ~
  stow vim -t ~
  stow emacs -t ~
  stow git -t ~
  stow bin -t ~
  popd
else
  echo stow not found, skipping several configs...
fi

# python
ln -s ~/$home_to_here/python/flake8 ~/.config/flake8
ln -s ~/$home_to_here/python/matplotlibrc ~/.config/matplotlib/matplotlibrc
ln -s ~/$home_to_here/python/condarc ~/.condarc
ln -s ~/$home_to_here/python/ipythonrc.py ~/.ipython/profile_default/startup
